<layout name="../../../Public/master" />
<ol class="breadcrumb" style="background-color: #f9f9f9;padding:8px 0;margin-bottom:10px;">
    <li>
        <a href=""><i class="fa fa-cogs"></i>
            分类管理</a>
    </li>
    <li class="active">
        <a href="">分类列表</a>
    </li>
</ol>
<ul class="nav nav-tabs" role="tablist">
    <li class="active"><a href="#tab1">分类列表</a></li>
</ul>
<table class="table table-hover" style="margin: 20px">
    <thead>
    <tr>
        <th width="80">cid</th>
        <th>分类名</th>
        <th width="100">排序</th>
        <th>操作</th>
        <th>类型</th>
    </tr>
    </thead>
    <tbody>
    <foreach name="cateData" key="k" item="v">
        <tr>
            <td width="80">{$v['cid']}</td>
            <td>{$v['_cname']}</td>
            <td width="200"><input type="text" name="sort" id="" width="100" value="{$v['csort']}"></td>
            <td>
                <a class="btn btn-warning" href="{:u('admin/cate/add',['cid'=>$v['cid']])}" style="margin-left: 20px;">添加子分类</a>
                <a class="btn btn-primary" href="{:u('admin/cate/edit',['cid'=>$v['cid'],'tid'=>$v['tid']])}" >编辑</a>
                <a class="btn btn-danger" href="javascript:;"onclick="del({$v['cid']})">删除</a>
            </td>
            <td>{$v['tname']}</td>
        </tr>
    </foreach>
    </tbody>
</table>

<div class="col-sm-12 text-right text-center-xs">
    <ul class="pagination pagination-sm m-t-none m-b-none">
        {$page}
    </ul>
</div>
<script>
    function del(cid) {
        var obj = util.modal({
            title:'确认删除吗?',//标题
            content:'',//内容
            footer:'<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button><button type="button" class="btn btn-danger confirm" data-dismiss="modal">删除</button>',//底部
            width:600,//宽度
            events:{
                confirm:function(){
                    //哪个元素上有.confirm类，被点击就执行这个回调
                    location.href="{:u('admin/cate/delete/cid/"+cid+"')}";
                }
            }
        });
        //显示模态框
        obj.modal('show');
    }
</script>